<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Skate Johnny</title>

<style>
body {
  margin: 0;
  overflow: hidden;
  background: linear-gradient(#6ec6ff, #eafaf1);
  font-family: Arial, sans-serif;
}
canvas {
  display: block;
}
#hud {
  position: fixed;
  top: 10px;
  left: 10px;
  background: rgba(0,0,0,0.6);
  color: white;
  padding: 10px 14px;
  border-radius: 10px;
  font-size: 16px;
}
</style>
</head>

<body>

<div id="hud">
ðŸ›¹ Skate Johnny<br>
Punkty: <span id="score">0</span><br>
Combo: <span id="combo">x1</span>
</div>

<canvas id="game"></canvas>

<script>
/* ===== SETUP ===== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scoreEl = document.getElementById("score");
const comboEl = document.getElementById("combo");

function resize() {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* ===== GAME STATE ===== */
let score = 0;
let combo = 1;

const skater = {
  x: 0,
  z: 0,
  vx: 0,
  vz: 0,
  angle: 0,
  air: false,
  trick: ""
};

const keys = {};
window.addEventListener("keydown", e => keys[e.code] = true);
window.addEventListener("keyup", e => keys[e.code] = false);

/* ===== INPUT iOS ===== */
canvas.addEventListener("touchstart", () => {
  if (!skater.air) jump("OLLIE", 100);
});

/* ===== TRICKS ===== */
function jump(name, points) {
  skater.vz = 14;
  skater.air = true;
  skater.trick = name;
  combo++;
  score += points * combo;
}

/* ===== UPDATE ===== */
function update() {
  if (keys.ArrowUp) skater.vx += 0.15;
  if (keys.ArrowLeft) skater.angle -= 0.05;
  if (keys.ArrowRight) skater.angle += 0.05;

  if (keys.Space && !skater.air) jump("OLLIE", 100);
  if (keys.KeyK && skater.air) jump("KICKFLIP", 300);
  if (keys.KeyS && skater.air) jump("SHOVE-IT", 250);

  skater.z += skater.vz;
  skater.vz -= 0.9;

  if (skater.z <= 0) {
    skater.z = 0;
    skater.vz = 0;
    skater.air = false;
    skater.trick = "";
    combo = 1;
  }

  skater.x += skater.vx;
  skater.vx *= 0.96;

  scoreEl.textContent = Math.floor(score);
  comboEl.textContent = "x" + combo;
}

/* ===== DRAW ===== */
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // ground
  ctx.fillStyle = "#7bed9f";
  ctx.fillRect(0, canvas.height * 0.65, canvas.width, canvas.height);

  // ramp
  ctx.fillStyle = "#95a5a6";
  ctx.fillRect(canvas.width / 2 + 200, canvas.height * 0.65 - 150, 200, 150);

  // rail
  ctx.fillStyle = "#2f3542";
  ctx.fillRect(canvas.width / 2 - 250, canvas.height * 0.65 - 80, 300, 10);

  // skater
  ctx.save();
  ctx.translate(canvas.width / 2, canvas.height * 0.65 - skater.z);
  ctx.rotate(skater.angle);

  ctx.fillStyle = "#e74c3c";
  ctx.fillRect(-12, -35, 24, 35);

  ctx.fillStyle = "#222";
  ctx.fillRect(-40, 0, 80, 10);

  ctx.restore();

  // trick text
  if (skater.trick) {
    ctx.fillStyle = "white";
    ctx.font = "28px Arial";
    ctx.fillText(skater.trick, canvas.width / 2 - 80, 100);
  }
}

/* ===== LOOP ===== */
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
